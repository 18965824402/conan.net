(function(n){n.login={formMessage:function(t){n(".login_tips").find(".tips_msg").remove();n(".login_tips").append('<div class="tips_msg"><i class="fa fa-question-circle"><\/i>'+t+"<\/div>")},loginClick:function(){var t=n("#txt_account"),i=n("#txt_password"),r=n("#txt_code");if(t.val()=="")return t.focus(),n.login.formMessage("请输入登录帐号。"),!1;if(i.val()=="")return i.focus(),n.login.formMessage("请输入登录密码。"),!1;if(r.val()=="")return r.focus(),n.login.formMessage("请输入验证码。"),!1;n("#login_button").attr("disabled","disabled").html("loading...");n.ajax({url:"/Account/Login",data:{Account:n.trim(t.val()),Password:n.md5(n.trim(i.val())),Code:n.trim(r.val()),__RequestVerificationToken:n("input[name='__RequestVerificationToken']").val()},type:"post",dataType:"json",success:function(t){t.state=="success"?(n("#login_button").html("登录成功，正在跳转..."),window.setTimeout(function(){window.location.href=t.returnUrl},500)):(n("#login_button").removeAttr("disabled").html("登录"),n.login.formMessage(t.message))}})},init:function(){n(".wrapper").height(n(window).height());n(".container").css("margin-top",(n(window).height()-n(".container").height())/2-50);n(window).resize(function(){n(".wrapper").height(n(window).height());n(".container").css("margin-top",(n(window).height()-n(".container").height())/2-50)});n("#login_button").click(function(){n.login.loginClick()});document.onkeydown=function(n){n||(n=window.event);(n.keyCode||n.which)==13&&(document.getElementById("login_button").focus(),document.getElementById("login_button").click())}}};n(function(){n.login.init();top.location!=self.location&&(top.location=self.location)})})(jQuery);