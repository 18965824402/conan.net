$.fn.getLayoutHeight=function(){return $(".content").length>0?$(window).height()-$(".content").offset().top:$(window).height()};$.fn.getLayoutBottomHeight=function(){return 52};$.fn.getGridTopHeight=function(){return $(".gridPanel").length>0?$(".gridPanel").offset().top:0};$.fn.getLayoutContentHeight=function(){return $.fn.getLayoutHeight()-$.fn.getLayoutBottomHeight()};$.fn.getGridHeight=function(n){var t=-18;return n&&(t=28),$(window).height()-$.fn.getGridTopHeight()-$.fn.getLayoutBottomHeight()-t};$.loading=function(n,t){n?top.App.blockUI({target:"body",boxed:!0,message:"加载中"|t,zIndex:29999999}):top.App.unblockUI()};loading=function(n,t){n?App.blockUI({target:"body",boxed:!0,message:"加载中"|t}):App.unblockUI()};tabiframeId=function(){return top.$(".tab_iframe:visible").attr("id")};$.fn.authorizeButton=function(){var n=$(this),t;n.find("a.btn").attr("authorize","no");n.find("ul.dropdown-menu").find("li").attr("authorize","no");t=tabiframeId().substring(11);$.getJSON("/SysMgr/PermissionUserMgr/GetUserPermissionButtonsByModuleId",{moduleId:t},function(t){t&&$.each(t,function(i){n.find("."+t[i].EnCode).attr("authorize","yes")});n.find("[authorize=no]").remove()})};$.fn.authorizeColModel=function(){var t=$(this),i=t.jqGrid("getGridParam","colModel"),r,n;$.each(i,function(n){i[n].name!="rn"&&t.hideCol(i[n].name)});r=tabiframeId().substr(6);n=top.authorizeColumnData[r];n!=undefined&&$.each(n,function(i){t.showCol(n[i].F_EnCode)})};$.fn.modalOpen=function(n){var n=$.extend({id:null,title:"系统窗口",width:"100px",height:"100px",url:"",shade:.3,btn:["确认","关闭"],callBack:null,allowOverParent:!1},n),t=n.width,i=n.height;n.allowOverParent||(t=top.$(window).width()>parseInt(n.width.replace("px",""))?n.width:top.$(window).width()+"px",i=top.$(window).height()>parseInt(n.height.replace("px",""))?n.height:top.$(window).height()+"px");top.layer.open({id:n.id,type:2,shade:n.shade,title:n.title,fix:!1,area:[t,i],content:n.url,btn:n.btn,btnclass:n.btnclass,yes:function(t){n.callBack("layui-layer-iframe"+t)},cancel:function(t){return n.cancelCallBack&&n.cancelCallBack("layui-layer-iframe"+t),!0}})};$.fn.modalConfirm=function(n,t){top.layer.confirm(n,{icon:3,title:"系统提示",btn:["确认","取消"]},function(){t(!0)},function(){t(!1)})};$.fn.modalAlert=function(n,t){var r="",i=0;t=="success"&&(r="fa-check-circle",i=1);t=="error"&&(r="fa-times-circle",i=2);t=="warning"&&(r="fa-exclamation-circle",i=3);top.layer.alert(n,{icon:i,title:"系统提示",btn:["确认"]})};$.fn.modalMsg=function(n,t){var i=0,r;t!=undefined?(r="",t=="success"&&(r="fa-check-circle",i=1),t=="error"&&(r="fa-times-circle",i=2),t=="warning"&&(r="fa-exclamation-circle",i=3),top.layer.msg(n,{icon:i,time:4e3,shift:5}),$(".layui-layer-msg").find("i."+i).parents(".layui-layer-msg").addClass("layui-layer-msg-"+t)):top.layer.msg(n)};$.fn.modalClose=function(){var n=top.layer.getFrameIndex(window.name),t=top.$("#layui-layer"+n).find(".layui-layer-btn").find("#IsdialogClose"),i=t.is(":checked");t.length==0&&(i=!0);i?top.layer.close(n):location.reload()};$.fn.submitForm=function(n){var n=$.extend({url:"",param:[],loading:"正在提交数据...",success:null,close:!0},n);$.loading(!0,n.loading);window.setTimeout(function(){$.ajax({url:n.url,data:n.param,type:"post",dataType:"json",success:function(t){t.isSucceeded==!0?(n.success(t),$.fn.modalMsg(t.message,"success"),n.close==!0&&$.fn.modalClose()):$.fn.modalAlert(t.message,"danger")},error:function(n,t,i){$.loading(!1);$.fn.modalMsg(i,"error")},beforeSend:function(){$.loading(!0,n.loading)},complete:function(){$.loading(!1)}})},500)};$.fn.submitAjax=function(n){App.blockUI({target:n.target,boxed:!0,message:"加载中"});window.setTimeout(function(){$.ajax({url:n.url,data:n.param,type:"post",dataType:"json",success:function(t){t.IsSucceeded==!0?n.success(t):$.fn.modalAlert(t.Message,"danger")},error:function(t,i,r){App.unblockUI(n.target);$.fn.modalMsg(r,"error")},beforeSend:function(){App.unblockUI(n.target)},complete:function(){App.unblockUI(n.target)}})},500)};$.fn.deleteForm=function(n){var n=$.extend({prompt:"注：您确定要删除该项数据吗？",url:"",param:[],loading:"正在删除数据...",success:null,close:!0},n);$.fn.modalConfirm(n.prompt,function(t){t&&($.loading(!0,n.loading),window.setTimeout(function(){$.ajax({url:n.url,data:n.param,type:"post",dataType:"json",success:function(t){t.IsSucceeded==!0?(n.success(t),$.fn.modalMsg(t.Message,"success")):$.fn.modalAlert(t.Message,"danger")},error:function(n,t,i){$.loading(!1);$.fn.modalMsg(i,"error")},beforeSend:function(){$.loading(!0,n.loading)},complete:function(){$.loading(!1)}})},500))})};$.request=function(n){for(var t,u=location.search.slice(1),r=u.split("&"),i=0;i<r.length;i++)if(t=r[i].split("="),t[0]==n)return unescape(t[1])=="undefined"?"":unescape(t[1]);return""};reload=function(){return location.reload(),!1};changeUrlParam=function(n,t,i){var u=new RegExp("(^|)"+t+"=([^&]*)(|$)"),r=t+"="+i;return n.match(u)!=null?n.replace(eval(u),r):n.match("[?]")?n+"&"+r:n+"?"+r};$.currentIframe=function(){return $.isbrowsername()=="Chrome"||$.isbrowsername()=="FF"?top.frames[tabiframeId()].contentWindow:top.frames[tabiframeId()]};$.isbrowsername=function(){var n=navigator.userAgent,t=n.indexOf("Opera")>-1;return t?"Opera":n.indexOf("Firefox")>-1?"FF":n.indexOf("Chrome")>-1?window.navigator.webkitPersistentStorage.toString().indexOf("DeprecatedStorageQuota")>-1?"Chrome":"360":n.indexOf("Safari")>-1?"Safari":n.indexOf("compatible")>-1&&n.indexOf("MSIE")>-1&&!t?"IE":void 0};$.download=function(n,t,i){if(n&&t){t=typeof t=="string"?t:jQuery.param(t);var r="";$.each(t.split("&"),function(){var n=this.split("=");r+='<input type="hidden" name="'+n[0]+'" value="'+n[1]+'" />'});$('<form action="'+n+'" method="'+(i||"post")+'">'+r+"<\/form>").appendTo("body").submit().remove()}};$.standTabchange=function(n,t){$(".standtabactived").removeClass("standtabactived");$(n).addClass("standtabactived");$(".standtab-pane").css("display","none");$("#"+t).css("display","block")};$.windowWidth=function(){return $(window).width()};$.windowHeight=function(){return $(window).height()};getQueryString=function(n){var i=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(i);return t!=null?unescape(t[2]):null};$.fn.formValid=function(n){$.extend($.validator.messages,{required:"必填字段",remote:"请修正此字段",email:"请输入有效的电子邮件地址",url:"请输入有效的网址",date:"请输入有效的日期",dateISO:"请输入有效的日期 (YYYY-MM-DD)",number:"请输入有效的数字",digits:"只能输入数字",creditcard:"请输入有效的信用卡号码",equalTo:"你的输入不相同",extension:"请输入有效的后缀",maxlength:$.validator.format("最多可以输入{0}个字符"),minlength:$.validator.format("最少要输入{0}个字符"),rangelength:$.validator.format("请输入长度在{0}到{1}之间的字符串"),range:$.validator.format("请输入范围在{0}到{1}之间的数值"),max:$.validator.format("请输入不大于{0}的数值"),min:$.validator.format("请输入不小于{0}的数值")});var t={errorPlacement:function(n,t){t.parents(".formValue").addClass("has-error");t.parents(".has-error").find("i.error").remove();t.parents(".has-error").append('<i class="fa fa-exclamation-circle error" data-placement="left" data-toggle="tooltip" title="'+n.html()+'"><\/i>');t.parents(".input-group").hasClass("input-group")&&t.parents(".has-error").find("i.error").css("right","33px");$("[data-toggle='tooltip']").tooltip()},success:function(n){var t=n.attr("id").replace("-error",""),i=$("#"+t);i.parent(".formValue").removeClass("has-error").find("i.error").remove()}};$.extend(t,n);$(this).validate(t)};$.fn.formSerialize=function(n){var f=$(this),r,i;if(!!n){for(r in n){var t=f.find("#"+r),u=$.trim(n[r]).replace(/&nbsp;/g,""),e=t.attr("type");t.hasClass("select2-hidden-accessible")&&(e="select");switch(e){case"checkbox":u=="true"?t.attr("checked","checked"):t.removeAttr("checked");break;case"select":t.val(u).trigger("change");break;default:t.val(u)}}return!1}return i={},f.find("input,select,textarea").each(function(){var n=$(this),r=n.attr("id"),u=n.attr("type"),t;switch(u){case"checkbox":i[r]=n.is(":checked");break;default:t=n.val()==""?"&nbsp;":n.val();$.request("keyValue")||(t=t.replace(/&nbsp;/g,""));i[r]=t}}),$("[name=__RequestVerificationToken]").length>0&&(i.__RequestVerificationToken=$("[name=__RequestVerificationToken]").val()),i};$.fn.bindSelect=function(n){var n=$.extend({id:"id",text:"text",search:!1,url:"",param:[],change:null,data:null},n),t=$(this);if(n.url!="")$.ajax({url:n.url,data:n.param,dataType:"json",async:!1,success:function(i){$.each(i,function(r){t.append($("<option><\/option>").val(i[r][n.id]).html(i[r][n.text]))});t.select2({minimumResultsForSearch:n.search==!0?0:-1});t.on("change",function(){n.change!=null&&n.change(i[$(this).find("option:selected").index()]);$("#select2-"+t.attr("id")+"-container").html($(this).find("option:selected").text().replace(/　　/g,""))})}});else if(n.data!=null){$.each(n.data,function(i){t.append($("<option><\/option>").val(n.data[i][n.id]).html(n.data[i][n.text]))});t.select2({minimumResultsForSearch:n.search==!0?0:-1});t.on("change",function(){n.change!=null&&n.change(data[$(this).find("option:selected").index()]);$("#select2-"+t.attr("id")+"-container").html($(this).find("option:selected").text().replace(/　　/g,""))})}else t.select2({minimumResultsForSearch:-1})};